db:
  provider: file

placeholders:
  url: http://www.asos.com
  
steps:
  - get:
      url: $url
      
  - find: a
  - attr: href
  - filter:
    - \/cat\/
  - reject:
    - tall
    - a-list
    - fashion-online
    - brands
    - new-in
    - gifts
    - maternity
    - designer
    - packs
    - exclusives
    - shop
    - marketplace
    - plus-size
  
  - get
  - find: .cats
  - parallel:
      name:
        - text
        - replace:
            - /(Wo)?men's/i
            - /\n/g
      url:
        - attr: href
  # - find: .product.product-link .product-img
  # - parallel:
  #     category:
  #       - find: .content h1
  #     url:
  #       - attr: url
      # url:
        # - url
        
  #     href:
  #       - attr: href
        
  # - db:
  #     key: /tmp/test/$category
      
        
      # next:
      #   - find: .next a
      #   - attr: href
      #
      #   - tap:
      #       name: parsers/asos.yaml
      #       placeholders:
      #         $url: $1
