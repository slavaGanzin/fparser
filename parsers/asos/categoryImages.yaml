placeholders:
  url: http://www.asos.com/women/tops/asos-basics/cat/?cid=17459
  
steps:
  - get:
      url: $url
  - tap:
      
  
      
  - find: .product-container
  - parallel:
      category:
        - document
        - find: .creative .content h1
        - text
        - replace:
            - /(Wo)?men's/i
            - /asos\s+/i
            - /\n/g
            - /(^\s+|\s+$)/
      
      id:
        - attr: data-productid
        
      image:
        - find: .product-img
        - attr: src
        - get
        
  - db:
      provider: file
      id: $id
      key: data/asos/$category
      pre:
        - prop(image)
